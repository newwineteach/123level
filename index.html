<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯èªå­¸ç¿’è€…ç­‰ç´šåˆ¤æ–·å¤§å¸«</title>
    <style>
        :root {
            --primary-color: #4A90E2;
            --success-color: #4CAF50;
            --error-color: #F44336;
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --text-color: #333;
            --shadow: 0 4px 15px rgba(0,0,0,0.1);
            --radius: 16px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            /* å…è¨± body å…§å®¹åœ¨æ¥µå°è¢å¹•ä¸Šæ²å‹• */
            overflow-y: auto; 
        }

        .container {
            width: 100%;
            max-width: 500px;
            background: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
            /* ä½¿ç”¨ dvh æ‡‰å°æ‰‹æ©Ÿç€è¦½å™¨ç¶²å€åˆ—ä¼¸ç¸®ï¼Œå›é€€ä½¿ç”¨ vh */
            height: 85vh;
            height: 85dvh; 
            max-height: 800px;
            /* ç¢ºä¿å®¹å™¨æœ¬èº«ä¸æœƒè®Šå¾—æ¯”è¢å¹•é‚„é«˜è€Œç„¡æ³•çœ‹åˆ°å…¨è²Œ */
            margin: auto;
        }

        /* Header */
        header {
            background: var(--primary-color);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            flex-shrink: 0;
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
        }

        .progress-bar {
            height: 100%;
            background: var(--success-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Game Area - ä¿®æ­£æ²å‹•å•é¡Œçš„æ ¸å¿ƒ */
        .game-area {
            flex-grow: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            /* é—œéµä¿®æ­£ï¼šå…è¨±å…§å®¹æº¢å‡ºæ™‚å‚ç›´æ²å‹• */
            overflow-y: auto; 
            /* è®“ iOS æ²å‹•æ›´å¹³æ»‘ */
            -webkit-overflow-scrolling: touch; 
        }

        .question-card {
            width: 100%;
            background: #fff;
            padding: 30px 20px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #eef2f7;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            transition: transform 0.3s ease;
            flex-shrink: 0; /* é˜²æ­¢é¡Œç›®å¡è¢«å£“ç¸® */
        }

        .category-tag {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-bottom: 15px;
            font-weight: bold;
            background: #eee;
            color: #666;
        }

        .question-text {
            font-size: 1.5rem;
            line-height: 1.6;
            color: #2c3e50;
            font-weight: 600;
        }

        /* Feedback Overlay */
        .feedback {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            text-align: center;
            padding: 20px;
        }

        .feedback.show {
            opacity: 1;
            pointer-events: auto;
        }

        .feedback-icon {
            font-size: 4rem;
            margin-bottom: 10px;
        }

        .feedback-text {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .feedback-detail {
            font-size: 1rem;
            color: #666;
            margin-bottom: 20px;
        }

        .next-btn {
            padding: 12px 30px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(74, 144, 226, 0.3);
        }

        /* Options */
        .options-grid {
            width: 100%;
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            /* å°‡é¸é …æ¨åˆ°åº•éƒ¨ï¼Œè‹¥ç©ºé–“ä¸è¶³å‰‡éœ€æ²å‹• */
            margin-top: auto; 
            flex-shrink: 0;
            padding-bottom: 10px; /* å¢åŠ åº•éƒ¨ç•™ç™½ */
        }

        .option-btn {
            background: white;
            border: 2px solid #ddd;
            border-radius: 12px;
            padding: 16px;
            font-size: 1.1rem;
            font-weight: bold;
            color: #555;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            min-height: 60px; /* ç¢ºä¿æŒ‰éˆ•æœ‰è¶³å¤ é»æ“Šé¢ç© */
        }

        .option-btn:active {
            transform: scale(0.98);
        }

        /* Level Colors */
        .btn-elementary { border-color: #81C784; color: #2E7D32; }
        .btn-intermediate { border-color: #64B5F6; color: #1565C0; }
        .btn-advanced { border-color: #E57373; color: #C62828; }

        .btn-elementary:hover { background: #E8F5E9; }
        .btn-intermediate:hover { background: #E3F2FD; }
        .btn-advanced:hover { background: #FFEBEE; }

        /* Start & End Screens */
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--card-bg);
            z-index: 20;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
            text-align: center;
        }

        .screen.hidden {
            display: none;
        }

        .screen h1 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 2rem;
        }

        .screen p {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .start-btn, .restart-btn {
            background: linear-gradient(135deg, #4A90E2, #50E3C2);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(74, 144, 226, 0.4);
            transition: transform 0.2s;
        }

        .start-btn:active, .restart-btn:active {
            transform: scale(0.95);
        }

        .score-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 20px 0;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: fall 3s linear infinite;
        }

        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); }
        }

    </style>
</head>
<body>

<div class="container">
    <header>
        ç­‰ç´šåˆ¤æ–·å¤§æŒ‘æˆ°
        <div style="font-size: 0.8rem; font-weight: normal; margin-top: 5px; opacity: 0.9;">
            æ ¹æ“šå­¸ç”Ÿç‰¹è‰²ã€éœ€æ±‚èˆ‡å›°é›£
        </div>
    </header>
    
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="game-area">
        <div class="question-card" id="questionCard">
            <span class="category-tag" id="categoryTag">ç‰¹è‰²</span>
            <div class="question-text" id="questionText">é¡Œç›®è¼‰å…¥ä¸­...</div>
        </div>

        <div class="feedback" id="feedbackOverlay">
            <div class="feedback-icon" id="feedbackIcon">âœ…</div>
            <div class="feedback-text" id="feedbackTitle">ç­”å°äº†ï¼</div>
            <div class="feedback-detail" id="feedbackDetail">é€™æ˜¯åˆç´šå­¸ç¿’è€…çš„ç‰¹å¾µã€‚</div>
            <button class="next-btn" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ</button>
        </div>

        <div class="options-grid">
            <button class="option-btn btn-elementary" onclick="checkAnswer('Elementary')">åˆç´š (Novice)</button>
            <button class="option-btn btn-intermediate" onclick="checkAnswer('Intermediate')">ä¸­ç´š (Intermediate)</button>
            <button class="option-btn btn-advanced" onclick="checkAnswer('Advanced')">é«˜ç´š (Advanced)</button>
        </div>
    </div>

    <!-- Start Screen -->
    <div class="screen" id="startScreen">
        <h1>ğŸ‘¨â€ğŸ« è¯èªå¸«è³‡<br>ç­‰ç´šåˆ¤æ–·å¤§å¸«</h1>
        <p>ä½ èƒ½ä¸èƒ½æº–ç¢ºåˆ†è¾¨åˆç´šã€ä¸­ç´šå’Œé«˜ç´šå­¸ç¿’è€…çš„ä¸åŒï¼Ÿ<br><br>é€™æ˜¯ä¸€å€‹é‡å°è¯èªæ•™å­¸å¯¦å‹™è¨­è¨ˆçš„ç·´ç¿’ï¼ŒåŒ…å«å­¸ç”Ÿçš„ç‰¹è‰²ã€éœ€æ±‚èˆ‡å›°é›£ã€‚</p>
        <button class="start-btn" onclick="startGame()">é–‹å§‹æŒ‘æˆ°</button>
    </div>

    <!-- End Screen -->
    <div class="screen hidden" id="endScreen">
        <h1>æŒ‘æˆ°å®Œæˆï¼</h1>
        <p>ä½ çš„å¾—åˆ†æ˜¯</p>
        <div class="score-display"><span id="finalScore">0</span> / <span id="totalQuestions">0</span></div>
        <p id="feedbackMessage">å¤ªæ£’äº†ï¼</p>
        <button class="restart-btn" onclick="startGame()">å†ç©ä¸€æ¬¡</button>
    </div>
</div>

<script>
    // é¡Œç›®è³‡æ–™åº« (æ ¹æ“šè¬›ç¾©å…§å®¹è£½ä½œ)
    const questionsData = [
        // åˆç´š
        { text: "å±±è…³ä¸‹çš„æ¢ç´¢è€…", category: "æ¯”å–»", level: "Elementary", explain: "é€™æ˜¯å°åˆç´šå­¸ç¿’è€…çš„å½¢è±¡æ¯”å–»ï¼Œåªèƒ½åœ¨å±±è…³ä¸‹é€²è¡ŒåŸºæœ¬æ¢ç´¢ã€‚" },
        { text: "åªèƒ½ä½¿ç”¨è¨˜æ†¶ä¸­çš„å–®è©å’ŒçŸ­èªé€²è¡Œäº¤æµ", category: "ç‰¹è‰²", level: "Elementary", explain: "åˆç´šå­¸ç¿’è€…ä¸»è¦ä¾è³´æ­»è¨˜ç¡¬èƒŒçš„å›ºå®šçŸ­èªã€‚" },
        { text: "è½åŠ›åƒ…èƒ½è½æ‡‚é—œéµè©ã€å•å€™èª", category: "èƒ½åŠ›è¡¨ç¾", level: "Elementary", explain: "åˆç´šéšæ®µçš„è½åŠ›é‡é»åœ¨æ–¼æŠ“é—œéµå­—ã€‚" },
        { text: "éœ€è¦å¤§é‡çš„ã€Œæ­£éŸ³ã€ç·´ç¿’", category: "éœ€æ±‚", level: "Elementary", explain: "åˆç´šéšæ®µç™¼éŸ³åŸºç¤æœ€ç‚ºé‡è¦ã€‚" },
        { text: "è¦ºå¾—ã€Œè²èª¿ã€å¾ˆé›£", category: "å›°é›£", level: "Elementary", explain: "é€™æ˜¯åˆç´šå­¸ç¿’è€…æœ€å¸¸è¦‹çš„ç—›é»ä¹‹ä¸€ã€‚" },
        { text: "éœ€è¦åœ–ç‰‡è¼”åŠ©ç†è§£", category: "éœ€æ±‚", level: "Elementary", explain: "åˆç´šæ•™å­¸éå¸¸ä¾è³´è¦–è¦ºè¼”åŠ©ã€‚" },
        
        // ä¸­ç´š
        { text: "æ²¿è‘—æ­¥é“å‰è¡Œ", category: "æ¯”å–»", level: "Intermediate", explain: "æ¯”å–»ä¸­ç´šå­¸ç¿’è€…å·²é–‹å§‹æœ‰è·¯å¾‘å¯å¾ªï¼Œèƒ½è™•ç†æ—¥å¸¸æƒ…å¢ƒã€‚" },
        { text: "èƒ½å‰µé€ æ€§åœ°ä½¿ç”¨å¥å­è¡¨é”å€‹äººæƒ³æ³•", category: "ç‰¹è‰²", level: "Intermediate", explain: "ä¸­ç´šçš„é—œéµçªç ´åœ¨æ–¼ã€Œå‰µé€ æ€§ã€ä½¿ç”¨èªè¨€ï¼Œè€ŒéèƒŒèª¦ã€‚" },
        { text: "èƒ½è™•ç†æ—¥å¸¸æƒ…å¢ƒèˆ‡ç°¡å–®å°è©±", category: "èƒ½åŠ›è¡¨ç¾", level: "Intermediate", explain: "ä¸­ç´šå­¸ç¿’è€…èƒ½æ‡‰ä»˜ç”Ÿæ´»ä¸­çš„å¤§éƒ¨åˆ†åŸºæœ¬éœ€æ±‚ã€‚" },
        { text: "éœ€è¦ã€Œå¢åŠ è©å½™é‡ã€èˆ‡ã€Œæ‹‰é•·å¥å­ã€", category: "éœ€æ±‚", level: "Intermediate", explain: "ä¸­ç´šéšæ®µéœ€è¦æ“´å……è©å½™ä¸¦ç·´ç¿’ç”¢å‡ºæ›´é•·çš„èªå¥ã€‚" },
        { text: "è¦ºå¾—ã€Œèªé€Ÿå¿«ã€å¥å­é•·ã€æ˜¯å›°é›£é»", category: "å›°é›£", level: "Intermediate", explain: "å°æ–¼æ¯èªè€…çš„æ­£å¸¸èªé€Ÿå’Œé•·å¥æ„Ÿåˆ°åƒåŠ›æ˜¯ä¸­ç´šçš„ç‰¹å¾µã€‚" },
        
        // é«˜ç´š
        { text: "æ¢ç´¢æ›´å»£é—Šçš„åœ°å½¢", category: "æ¯”å–»", level: "Advanced", explain: "é«˜ç´šå­¸ç¿’è€…èƒ½è™•ç†å»£æ³›ä¸”è¤‡é›œçš„è­°é¡Œã€‚" },
        { text: "èƒ½ä»¥æ®µè½ç‚ºå–®ä½é€²è¡Œè©³ç´°æ•˜è¿°", category: "ç‰¹è‰²", level: "Advanced", explain: "é«˜ç´šç¨‹åº¦è¦æ±‚èƒ½çµ„ç¹”ã€Œæ®µè½ã€ç¯‡ç« ï¼Œè€Œéå–®å¥ã€‚" },
        { text: "èƒ½è½æ‡‚æ–°èã€æ•…äº‹ï¼ŒæŒæ¡ä¸»æ—¨èˆ‡ç´°ç¯€", category: "èƒ½åŠ›è¡¨ç¾", level: "Advanced", explain: "é«˜ç´šå­¸ç¿’è€…èƒ½è™•ç†çœŸå¯¦èªæ–™å¦‚æ–°èå ±å°ã€‚" },
        { text: "éœ€è¦å­¸ç¿’ã€Œå°ˆæ¥­è¡¨é”ã€èˆ‡ã€Œæ–‡åŒ–è¨è«–ã€", category: "éœ€æ±‚", level: "Advanced", explain: "é«˜ç´šéšæ®µé€²å…¥å°ˆæ¥­é ˜åŸŸèˆ‡æ·±å±¤æ–‡åŒ–è­°é¡Œçš„æ¢è¨ã€‚" },
        { text: "åˆ†è¾¨ã€Œæ›¸é¢èªã€èˆ‡ã€Œå£èªã€çš„å·®ç•°", category: "å›°é›£/éœ€æ±‚", level: "Advanced", explain: "é«˜ç´šéšæ®µé–‹å§‹å¤§é‡æ¥è§¸æ›¸é¢èªï¼Œéœ€å€åˆ†èªé«”ã€‚" }
    ];

    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;

    function startGame() {
        // æ´—ç‰Œé¡Œç›®
        currentQuestions = [...questionsData].sort(() => Math.random() - 0.5);
        currentIndex = 0;
        score = 0;
        
        document.getElementById('startScreen').classList.add('hidden');
        document.getElementById('endScreen').classList.add('hidden');
        updateProgress();
        showQuestion();
    }

    function showQuestion() {
        const q = currentQuestions[currentIndex];
        document.getElementById('categoryTag').innerText = q.category;
        document.getElementById('questionText').innerText = q.text;
        document.getElementById('feedbackOverlay').classList.remove('show');
        
        // é‡ç½®é¡è‰²
        const catTag = document.getElementById('categoryTag');
        if(q.category === "å›°é›£") catTag.style.background = "#ffebee";
        else if(q.category === "éœ€æ±‚") catTag.style.background = "#e3f2fd";
        else catTag.style.background = "#eee";
    }

    function checkAnswer(selectedLevel) {
        const q = currentQuestions[currentIndex];
        const isCorrect = selectedLevel === q.level;
        
        const feedbackOverlay = document.getElementById('feedbackOverlay');
        const feedbackIcon = document.getElementById('feedbackIcon');
        const feedbackTitle = document.getElementById('feedbackTitle');
        const feedbackDetail = document.getElementById('feedbackDetail');

        if (isCorrect) {
            score++;
            feedbackIcon.innerText = "ğŸ‰";
            feedbackTitle.innerText = "ç­”å°äº†ï¼";
            feedbackTitle.style.color = "var(--success-color)";
        } else {
            feedbackIcon.innerText = "ğŸ’¡";
            feedbackTitle.innerText = "å†æƒ³ä¸€ä¸‹...";
            feedbackTitle.style.color = "var(--error-color)";
        }

        // é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆçš„ä¸­æ–‡åç¨±
        let levelName = "";
        if (q.level === "Elementary") levelName = "åˆç´š";
        if (q.level === "Intermediate") levelName = "ä¸­ç´š";
        if (q.level === "Advanced") levelName = "é«˜ç´š";

        feedbackDetail.innerHTML = `é€™æ˜¯ <strong>${levelName}</strong> çš„ç‰¹å¾µã€‚<br>${q.explain}`;
        feedbackOverlay.classList.add('show');
        
        updateProgress();
    }

    function nextQuestion() {
        currentIndex++;
        if (currentIndex < currentQuestions.length) {
            showQuestion();
        } else {
            endGame();
        }
    }

    function updateProgress() {
        const progress = ((currentIndex) / currentQuestions.length) * 100;
        document.getElementById('progressBar').style.width = `${progress}%`;
    }

    function endGame() {
        document.getElementById('endScreen').classList.remove('hidden');
        document.getElementById('finalScore').innerText = score;
        document.getElementById('totalQuestions').innerText = currentQuestions.length;
        
        const percentage = (score / currentQuestions.length) * 100;
        let message = "";
        if (percentage === 100) message = "å¤ªç¥äº†ï¼ä½ æ˜¯æ•™å­¸å¤§å¸«ï¼ ğŸ†";
        else if (percentage >= 80) message = "å¾ˆæ£’ï¼è§€å¿µéå¸¸æ¸…æ¥šï¼ ğŸ‘";
        else if (percentage >= 60) message = "ä¸éŒ¯å–”ï¼Œå†åŠ æ²¹ä¸€ä¸‹ï¼ ğŸ’ª";
        else message = "æ²’é—œä¿‚ï¼Œå¤šç·´ç¿’å¹¾æ¬¡å°±ç†Ÿäº†ï¼ ğŸ“š";
        
        document.getElementById('feedbackMessage').innerText = message;
    }
</script>

</body>
</html>